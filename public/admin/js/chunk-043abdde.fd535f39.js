(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-043abdde","chunk-1fc71180","chunk-1f7eb1e3","chunk-2d207f46"],{"2c7e":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("d2-container",{class:{"page-compact":e.crud.pageOptions.compact}},[n("d2-crud-x",e._g(e._b({ref:"d2Crud"},"d2-crud-x",e._crudProps,!1),e._crudListeners),[n("div",{attrs:{slot:"header"},slot:"header"},[n("el-button-group",[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addRow}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 新增")])],1),n("crud-toolbar",e._g(e._b({},"crud-toolbar",e._crudToolbarProps,!1),e._crudToolbarListeners))],1)])],1)},i=[],o=(n("96cf"),n("1da1")),a=n("a375"),s=n("a96b"),c=n("1fbf"),d={name:"region",components:{},mixins:[c["d2CrudPlus"].crud],data:function(){return{multipleSelection:void 0}},computed:{},mounted:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{getCrudOptions:function(){return Object(s["crudOptions"])(this)},pageRequest:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(a["GetList"])(e);case 2:return r=n.sent,t.$nextTick(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getD2CrudTable().store.scheduleLayout();case 1:case"end":return e.stop()}}),e)})))),n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})))()},addRequest:function(e){return Object(a["AddObj"])(e)},updateRequest:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(a["UpdateObj"])(e);case 2:t.reloadTreeChildren(e.parent_id);case 3:case"end":return n.stop()}}),n)})))()},delRequest:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(a["DelObj"])(e.id);case 2:t.reloadTreeChildren(e.parent_id);case 3:case"end":return n.stop()}}),n)})))()},reloadTreeChildren:function(e){var t=this.getD2Crud().$refs.elTable.store.states.treeData;if(null!=t){var n=t[e];null!=n&&(n.loaded=!1,n.expanded=!1)}}}},u=d,l=n("2877"),h=Object(l["a"])(u,r,i,!1,null,null,null);t["default"]=h.exports},"5b67":function(e,t,n){},"7a11":function(e,t,n){"use strict";n("5b67")},a375:function(e,t,n){"use strict";n.r(t),n.d(t,"GetList",(function(){return o})),n.d(t,"AddObj",(function(){return a})),n.d(t,"UpdateObj",(function(){return s})),n.d(t,"DelObj",(function(){return c}));var r=n("22ce"),i="/setting.region";function o(e){return Object(r["b"])({url:i+"/list",method:"post",data:e})}function a(e){return Object(r["b"])({url:i+"/add",method:"post",data:e})}function s(e){return Object(r["b"])({url:i+"/edit",method:"post",data:e})}function c(e){return Object(r["b"])({url:i+"/del",method:"post",data:{id:e}})}},a93e:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("div",{staticClass:"region"},[e._v(e._s(e.regionText))]),n("div",{staticClass:"choose"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.regionSelect=!0}}},[e._v("选择")])],1)]),n("el-dialog",{attrs:{title:"选择地区",visible:e.regionSelect,width:"200","append-to-body":""},on:{"update:visible":function(t){e.regionSelect=t}}},[n("el-tree",{ref:"tree",attrs:{props:e.regionList,load:e.loadNode,"node-key":"id",lazy:"","show-checkbox":"","check-strictly":""},on:{"check-change":e.handleNodeClick}}),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.regionSelect=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},i=[],o=(n("b0c0"),n("22ce")),a={data:function(){return{regionText:"",regionSelect:!1,regionSelectId:0,nodeId:0,regionList:{label:"name",children:"children",isLeaf:"leaf"}}},props:{value:{default:null},scope:{default:null},myProps:{default:null}},computed:{},mounted:function(){this.getParentRegionText()},methods:{confirm:function(){this.regionSelectId=this.$refs.tree.getCheckedKeys()[0]||0,this.regionText=this.$refs.tree.getCheckedNodes()[0]["name"]||"",this.scope.form.parent_id=this.regionSelectId,this.regionSelect=!1},getParentRegionText:function(){var e=this;0==this.scope.form.parent_id||void 0==this.scope.form.parent_id?this.regionText="根节点":Object(o["b"])({url:"/setting.region/getOne",method:"post",data:{id:this.scope.form.parent_id}}).then((function(t){e.regionText=t.data.name}))},loadNode:function(e,t){0===e.level&&Object(o["b"])({url:"/setting.region/list",method:"post",data:{parent_id:0}}).then((function(e){var n={id:0,name:"根节点",hasChildren:!1};e.data.records.unshift(n),t(e.data.records)})),e.level>0&&Object(o["b"])({url:"/setting.region/list",method:"post",data:{parent_id:e.data.id}}).then((function(e){t(e.data.records)}))},handleNodeClick:function(e,t,n){!0===t?(this.regionSelectId=e.id,this.$refs.tree.setCheckedKeys([e.id]),this.regionText=e.name):this.regionSelectId==e.id&&this.$refs.tree.setCheckedKeys([e.id])}}},s=a,c=(n("7a11"),n("2877")),d=Object(c["a"])(s,r,i,!1,null,null,null);t["default"]=d.exports},a96b:function(e,t,n){"use strict";n.r(t),n.d(t,"crudOptions",(function(){return o}));var r=n("22ce"),i=n("a93e"),o=function(e){return{rowHandle:{view:{thin:!1,text:"查看",disabled:function(){return!e.hasPermissions("setting.region:view")}},edit:{thin:!1,text:"编辑",disabled:function(){return!e.hasPermissions("setting.region:edit")}},remove:{thin:!1,text:"删除",disabled:function(){return!e.hasPermissions("setting.region:del")}},custom:[],width:300,fixed:"right"},pageOptions:{compact:!0},options:{events:{"expand-change":function(e,t){}},height:"100%",highlightCurrentRow:!0,rowKey:"id",lazy:!0,load:function(t,n,i){Object(r["b"])({url:"/setting.region/list",method:"post",data:{parent_id:t.id}}).then((function(t){e._doRowValueBuilder(t.data.records),i(t.data.records)}))}},components:{treeSelect:i["default"]},columns:[{title:"地区",key:"name",width:700,form:{disabled:!1,rules:[{required:!0,message:"请填写地区名称"}]}},{title:"上级地区",key:"parent_id",width:200,show:!1,form:{disabled:!1,component:{name:i["default"]}}},{title:"排序",key:"sort",width:300,sortable:!0,form:{disabled:!1,rules:[{type:"number",message:"排序必须为数字值"}],component:{value:0}}},{title:"是否启用",key:"is_enable",type:"select",width:300,search:{disabled:!0},dict:{data:[{value:!0,label:"是",color:"success"},{value:!1,label:"否",color:"danger"}]},sortable:!1,form:{disabled:!1,component:{value:!0}}}]}}}}]);
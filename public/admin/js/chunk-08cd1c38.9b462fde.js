(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08cd1c38","chunk-2d0d6f61","chunk-2d0d34d6"],{"5bd7":function(e,t,r){"use strict";r.r(t),r.d(t,"crudOptions",(function(){return n}));r("be16"),r("22ce");var n=function(e){return{options:{height:"100%"},rowHandle:{width:180,view:{thin:!0,text:null,disabled:function(){return!e.hasPermissions("user.user:view")}},edit:{thin:!0,text:null,disabled:function(){return!e.hasPermissions("user.user:edit")}},remove:{thin:!0,text:null,disabled:function(){return!e.hasPermissions("user.user:del")}},custom:[]},columns:[{title:"头像",key:"avatar",type:"avatar-uploader",sortable:!1,component:{props:{height:50,width:50}}},{title:"昵称",key:"nickname",search:{disabled:!1},sortable:!1},{title:"手机号",key:"mobile",form:{},search:{disabled:!1},sortable:!1},{title:"性别",key:"gender",type:"radio",dict:{data:[{value:0,label:"保密"},{value:1,label:"男"},{value:2,label:"女",color:"danger"}]},form:{component:{value:0}},sortable:!1},{title:"邮箱",key:"email",search:{disabled:!0},form:{rules:[{type:"email",message:"请输入正确的邮箱"}]},show:!1},{title:"省",key:"province",search:{disabled:!1},form:{},show:!0},{title:"城市",key:"city",search:{disabled:!1},form:{},show:!0},{title:"生日",key:"birthday",search:{disabled:!1},type:"date",show:!0},{title:"状态",key:"status",type:"select",search:{disabled:!1},dict:{data:[{value:0,label:"正常",color:"success"},{value:1,label:"禁止登录",color:"danger"}]},form:{component:{value:0}},sortable:"custom"},{title:"创建时间",key:"create_time",type:"datetime",width:140,form:{disabled:!0},show:!1},{title:"修改时间",key:"update_time",type:"datetime",width:140,form:{disabled:!0},show:!1}]}}},"757d":function(e,t,r){"use strict";r.r(t),r.d(t,"GetList",(function(){return i})),r.d(t,"AddObj",(function(){return o})),r.d(t,"UpdateObj",(function(){return d})),r.d(t,"DelObj",(function(){return a})),r.d(t,"GetObj",(function(){return u}));var n=r("22ce"),s="/user.user";function i(e){return Object(n["b"])({url:s+"/list",method:"post",data:e})}function o(e){return Object(n["b"])({url:s+"/add",method:"post",data:e})}function d(e){return Object(n["b"])({url:s+"/edit",method:"post",data:e})}function a(e){return Object(n["b"])({url:s+"/del",method:"post",params:{id:e}})}function u(e){return Object(n["b"])({url:s+"/info",method:"get",params:{id:e}})}},f58b:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("d2-container",{class:{"page-compact":e.crud.pageOptions.compact}},[r("template",{slot:"header"},[e._v(" 会员管理 ")]),r("d2-crud-x",e._g(e._b({ref:"d2Crud",on:{authz:e.authzHandle}},"d2-crud-x",e._crudProps,!1),e._crudListeners),[r("div",{attrs:{slot:"header"},slot:"header"},[r("crud-search",{ref:"search",attrs:{options:e.crud.searchOptions},on:{submit:e.handleSearch}}),r("crud-toolbar",{attrs:{search:e.crud.searchOptions.show,compact:e.crud.pageOptions.compact,columns:e.crud.columns},on:{"update:search":function(t){return e.$set(e.crud.searchOptions,"show",t)},"update:compact":function(t){return e.$set(e.crud.pageOptions,"compact",t)},refresh:function(t){return e.doRefresh()},"columns-filter-changed":e.handleColumnsFilterChanged}})],1)]),r("el-dialog",{attrs:{title:"授予角色",visible:e.dialogPermissionVisible},on:{"update:visible":function(t){e.dialogPermissionVisible=t}}},[r("el-checkbox-group",{model:{value:e.checkedRoleIds,callback:function(t){e.checkedRoleIds=t},expression:"checkedRoleIds"}},e._l(e.roleList,(function(t){return r("el-checkbox",{key:t.id,staticClass:"d2-mb-10",attrs:{label:t.id}},[e._v(e._s(t.name))])})),1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updatePermession(e.currentUserId)}}},[e._v("确定 ")])],1)],1)],2)},s=[],i=(r("4de4"),r("c975"),r("d81d"),r("5bd7")),o=r("1fbf"),d=r("757d"),a={name:"User",mixins:[o["d2CrudPlus"].crud],data:function(){return{roleList:[],checkedRoleIds:[],dialogPermissionVisible:!1,currentUserId:void 0}},methods:{getCrudOptions:function(){return Object(i["crudOptions"])(this)},pageRequest:function(e){return d["GetList"](e)},addRequest:function(e){return d["AddObj"](e)},updateRequest:function(e){return d["UpdateObj"](e)},delRequest:function(e){return d["DelObj"](e.id)},infoRequest:function(e){return d["GetObj"](e.id)},authzHandle:function(e){var t=this;d["GetRoleList"]().then((function(r){var n=r.data,s=e.row.roles;null==s&&(s=[]);var i=n.map((function(e){return e.id})).filter((function(e){return s.indexOf(e)>=0}));t.$set(t,"checkedRoleIds",i),t.$set(t,"roleList",n),t.currentUserId=e.row.id,t.dialogPermissionVisible=!0}))},updatePermession:function(e){var t=this;d["DoAuthz"](e,this.checkedRoleIds).then((function(e){t.dialogPermissionVisible=!1,t.doRefresh()}))}}},u=a,c=r("2877"),l=Object(c["a"])(u,n,s,!1,null,null,null);t["default"]=l.exports}}]);